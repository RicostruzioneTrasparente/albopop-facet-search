<es-facet-keywords>

    <div
        each="{ opts.items }"
        ref="input"
        data-value="{ value }"
        class="facet-item { disable: !count } { active: active }"
        onclick="{ this.submit }"
    >
        <span class="facet-label">{ label || value }</span>&nbsp;<span class="facet-count">{ count }</span>
    </div>

    <style>
        :scope .facet-item {
            cursor: pointer;
        }
        :scope .active {
            font-weight: bold;
        }
        :scope .disable {
            color: lightgrey;
        }
        :scope .facet-count:before {
            content: '(';
        }
        :scope .facet-count:after {
            content: ')';
        }
    </style>

    <script>

        var tag = this;

        tag.on('mount', function() {
            tag.opts.type = 'keywords';
            tag.opts.field = tag.opts.field || "";
            tag.opts.items = tag.opts.items || [];
        });

        tag.submit = function(e) {
            e.currentTarget.classList.toggle('active');
            tag.trigger('submit', {
                type: tag.opts.type,
                field: tag.opts.field,
                values: tag.refs.input
                    .filter(function(el) { return el.classList.contains('active'); })
                    .map(function(el) { return el.dataset.value; })
            });
            if (e) e.preventDefault();
        };

    </script>

</es-facet-keywords>
